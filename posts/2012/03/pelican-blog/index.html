<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Static file blog with Pelican, Twitter Bootstrap, and Github</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link rel="stylesheet" href="../../../../.././theme/css/bootstrap.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
	
	.tag-1 {
		font-size: 13pt;
	}
	
	.tag-2 {
		font-size: 10pt;
	}
	
	.tag-2 {
		font-size: 8pt;
	}

	.tag-4 {
		font-size: 6pt;
	}
	
    </style>
    <link href="../../../../.././theme/css/bootstrap-responsive.css" rel="stylesheet">
	<link href="../../../../.././theme/css/font-awesome.css" rel="stylesheet">
	
    <link href="../../../../.././theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../../../../.././theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="../../../../.././theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../../../.././theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../../../.././theme/images/apple-touch-icon-114x114.png">

    <link href="../../../../.././feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Return the Videotapes ATOM Feed" />
    
    <link href="../../../../.././feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="Return the Videotapes RSS Feed" />
    

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../../../../.././index.html">Return the Videotapes </a>
          <div class="nav-collapse">
            <ul class="nav">
              
              
              
			  <li class="divider-vertical"></li>
              
              
                  <li class="active">
                    <a href="../../../../.././category/programming.html">
						<i class="icon-folder-open icon-large"></i>programming
					</a>
                  </li>
              
			  
			  <ul class="nav pull-right">
				<li><a href="../../../../.././archives.html"><i class="icon-th-list"></i>Archives</a></li>
			  </ul>
			  
            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
            
<section id="content">    
	<article>
		<header>
			<h1>
				<a href=""
					rel="bookmark" 
					title="Permalink to Static file blog with Pelican, Twitter Bootstrap, and Github">
					Static file blog with Pelican, Twitter Bootstrap, and Github 
				</a>
				
<a href="http://twitter.com/share" class="twitter-share-button" 
   data-count="horizontal" data-via="zgohr">Tweet</a>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js">
</script>
 
			</h1> 
		</header>
		<div class="entry-content">
		<div class="well">
			<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2012-03-10T18:52:00">
	<i class="icon-calendar"></i>Sat 10 March 2012
</abbr>

<span class="label">By</span>
<a href="../../../../.././author/zach-gohr.html"><i class="icon-user"></i>Zach Gohr</a>

<span class="label">Category</span>
<a href="../../../../.././category/programming.html"><i class="icon-folder-open"></i>programming</a>. 


	

<span class="label">Tags</span> 

	<a href="../../../../.././tag/pelican.html"><i class="icon-tag"></i>pelican</a>

	<a href="../../../../.././tag/markdown.html"><i class="icon-tag"></i>markdown</a>

	<a href="../../../../.././tag/git.html"><i class="icon-tag"></i>git</a>

	<a href="../../../../.././tag/github.html"><i class="icon-tag"></i>github</a>

	<a href="../../../../.././tag/blog.html"><i class="icon-tag"></i>blog</a>



</footer><!-- /.post-info -->
		</div>
		<h2>Preface</h2>
<p>Let me preface this article as not as much a how-to, but more of a learning experience. I go step by step through what I did to get this static blog going, and didn't take out any of the mistakes I made. So read the article before attempting! Let this be your warning.</p>
<h2>Introduction</h2>
<p>I won't get into why I chose Pelican beyond that I wanted my blog to be based on Python (personal preference) and use <a href="http://jinja.pocoo.org/docs/">Jinja2</a> for templating. I've used a little Jinja2 previously and it is an excellent template language. I chose Github because it's free (thanks, guys!) And Twitter Bootstrap is the current de-facto site design boilerplate.</p>
<h2>The Environment</h2>
<p>For Python I use <a href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> and <a href="http://pypi.python.org/pypi/virtualenvwrapper/">virtualenvwrapper</a> to keep my environments clean so let's begin by creating one.</p>
<div class="codehilite"><pre><span class="n">mkvirtualenv</span> <span class="n">pelican</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pelican</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">markdown</span>
</pre></div>


<p>You'll also notice I plan on writing in markdown, it is currently a little more universal than restructured text. Pelican will use markdown as long as the package is installed.</p>
<div class="codehilite"><pre><span class="n">mkdir</span> <span class="n">blog</span><span class="o">-</span><span class="n">environment</span><span class="p">;</span> <span class="n">cd</span> <span class="n">blog</span><span class="o">-</span><span class="n">environment</span>
<span class="n">pip</span> <span class="n">freeze</span> <span class="o">-</span><span class="n">v</span> <span class="o">&gt;&gt;</span> <span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>Finally, allow others to reuse this environment by spitting the dependencies into a requirements file.</p>
<h2>Git</h2>
<p>My goal, if possible, is to split up the blog creation environment from the generated content. I also found that there have been a few Twitter Bootstrap themes that I can fork to my liking. For these purposes I will use git submodules.</p>
<div class="codehilite"><pre><span class="n">git</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">add</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ametaireau</span><span class="o">/</span><span class="n">pelican</span><span class="o">-</span><span class="n">themes</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span>
</pre></div>


<p>Poking around in the bootstrap themes in this repository made apparent that the one I would like to use, Bootstrap2, is not all that polished. Instead of going ahead and fixing it up, I found there is already a pull request in Github waiting to be merged that did exactly what I want. Using the minified version of bootstrap as well as some other good practices.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="n">pelican</span><span class="o">-</span><span class="n">themes</span><span class="o">/</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">stephane</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">stephane</span><span class="o">/</span><span class="n">pelican</span><span class="o">-</span><span class="n">themes</span><span class="p">.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">pull</span> <span class="n">stephane</span> <span class="n">master</span>
</pre></div>


<p>Thank you, <a href="https://github.com/stephane">Stephane Raimbault</a>. And because I'm going to be hacking up the theme for myself, a simple fork and remote will work out nice...</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="n">pelican</span><span class="o">-</span><span class="n">themes</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">rename</span> <span class="n">origin</span> <span class="n">upstream</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">git</span><span class="p">@</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">:</span><span class="n">zgohr</span><span class="o">/</span><span class="n">pelican</span><span class="o">-</span><span class="n">themes</span><span class="p">.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master</span>
<span class="n">cd</span> <span class="p">..</span>
</pre></div>


<div class="codehilite"><pre><span class="n">mkdir</span> <span class="n">output</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">add</span> <span class="n">git</span><span class="p">@</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">:</span><span class="n">zgohr</span><span class="o">/</span><span class="n">zgohr</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">.</span><span class="n">git</span> <span class="n">output</span><span class="o">/</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span>
</pre></div>


<p>Finally, I turned pelican's output directory into my github <a href="http://help.github.com/pages/">page</a> so changes can be pushed easily. If you would like to fork my blog-environment repository, you'll want to whack this submodule and add your own github page.</p>
<h2>Setting up Pelican</h2>
<div class="codehilite"><pre><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ametaireau</span><span class="o">/</span><span class="n">pelican</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">samples</span><span class="o">/</span><span class="n">pelican</span><span class="p">.</span><span class="n">conf</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">O</span> <span class="n">settings</span><span class="p">.</span><span class="n">py</span>

<span class="n">mkdir</span> <span class="n">content</span> # <span class="n">To</span> <span class="n">store</span> <span class="n">articles</span> <span class="n">as</span> <span class="n">well</span> <span class="n">as</span> <span class="n">static</span> <span class="n">files</span>
<span class="n">mkdir</span> <span class="n">content</span><span class="o">/</span><span class="n">extra</span> # <span class="n">robots</span><span class="p">,</span> <span class="n">humans</span><span class="p">,</span> <span class="n">favico</span><span class="p">,</span> <span class="n">etc</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ametaireau</span><span class="o">/</span><span class="n">pelican</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">samples</span><span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">extra</span><span class="o">/</span><span class="n">robots</span><span class="p">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">O</span> <span class="o">./</span><span class="n">content</span><span class="o">/</span><span class="n">extra</span><span class="o">/</span><span class="n">robots</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>I then modified my settings file to my liking, and gave it a whirl <code>pelican -s settings.py</code></p>
<p>This command spits out the static blog into the <code>output/</code> directory. Loading it up in Chrome and at first glance. Everything looks very nice.
On second glance, not so much.</p>
<h2>Troubleshooting</h2>
<p>First, I noticed that in the article metadata, the links aren't working. Clicking my name should take me to the author page and it instead is linking to the relative root.</p>
<hr />
<p><img alt="article infos" src="../../../../../static/images/article_infos.png" /></p>
<hr />
<p>I inspected the element and grepped my theme directory for the "By" span label and it is found in <code>templates/article_infos.html</code>.
A quick comparison with some of the other themes shows a discrepency.</p>
<p>My theme is using the <code>{{ article.author.url }}</code> tag while the others use <code>author/{{ article.author }}.html</code></p>
<p>My article author doesn't have a url property! Luckily I made a pretty quick assumption that it was due to an incompatibility and when I changed it to look like the other themes, it just worked.</p>
<p>What now, use a theme not optimized for my version of Pelican or update my Pelican to a development version?</p>
<h2>Development Version</h2>
<p>If I didn't want to use the latest and greatest version of Twitter Bootstrap, and if I wasn't willing to debug my own issues, I would not have chosen this route.</p>
<p>Let's get the development version installed.</p>
<p>First I modified my <code>requirements.txt</code>. I changed the pelican line from <code>pelican==2.8.0</code> to <code>git+git://github.com/ametaireau/pelican.git</code></p>
<div class="codehilite"><pre><span class="n">pip</span> <span class="n">uninstall</span> <span class="n">pelican</span><span class="p">;</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>I checked out the theme files I had modified to put them back to the new URL style. Running pelican now gives a bunch of confusing looking errors...</p>
<div class="codehilite"><pre><span class="n">WARNING</span><span class="o">:</span> <span class="n">Found</span> <span class="n">deprecated</span> <span class="err">`</span><span class="n">ARTICLE_PERMALINK_STRUCTURE</span><span class="err">`</span> <span class="k">in</span> <span class="n">settings</span><span class="o">.</span>  <span class="n">Modifing</span> <span class="n">the</span> <span class="n">following</span> <span class="n">settings</span> <span class="k">for</span> <span class="n">the</span> <span class="n">same</span> <span class="n">behaviour</span><span class="o">.</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">ARTICLE_URL</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/{date:%Y}/{date:%m}/{slug}.html&#39;</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">ARTICLE_LANG_URL</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/{slug}-{lang}.html&#39;</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">PAGE_URL</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/pages/{slug}.html&#39;</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">PAGE_LANG_URL</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/pages/{slug}-{lang}.html&#39;</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">ARTICLE_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/{slug}.html&#39;</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">ARTICLE_LANG_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/{slug}-{lang}.html&#39;</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">PAGE_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/pages/{slug}.html&#39;</span>
<span class="n">WARNING</span><span class="o">:</span> <span class="n">PAGE_LANG_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/pages/{slug}-{lang}.html&#39;</span>
</pre></div>


<p>But now my article links are broken. A quick look at the Pelican 3.0 <a href="http://pelican.notmyidea.org/en/latest/settings.html#url-settings">docs</a> show there is another new setting called <code>ARTICLE_SAVE_AS</code>.
This setting lets you save the static file as a different name than where its links point to. This is nice so that your links go directly to the slug that is pretty, while the page gets saved as an index.html.</p>
<div class="codehilite"><pre><span class="n">ARTICLE_URL</span> <span class="p">=</span> <span class="s">&#39;/posts/{date:%Y}/{date:%m}/{slug}/&#39;</span>
<span class="n">ARTICLE_SAVE_AS</span> <span class="p">=</span> <span class="s">&#39;/posts/{date:%Y}/{date:%m}/{slug}/index.html&#39;</span>
</pre></div>


<h2>Conclusion</h2>
<p>This has been a learning experience, but nothing too complex to handle. In the future I will have more comments regarding Pelican theming, but until then you'll have to deal with a relatively dirty looking base theme.</p>
<p>Leave a comment if you got some use out of this or need a clarification.</p>
<p>Fork the <a href="https://github.com/zgohr/blog-environment">blog environment</a></p>
		</div><!-- /.entry-content -->
		
		<div class="comments">
		<h2>Comments !</h2>
			<div id="disqus_thread"></div>
			<script type="text/javascript">
			   var disqus_identifier = "/posts/2012/03/pelican-blog/";
			   (function() {
				var dsq = document.createElement('script'); 
				dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://returnthevideotapes.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || 
				 document.getElementsByTagName('body')[0]).appendChild(dsq);
			  })();
			</script>
		</div>
		
	</article>
</section>

        </div><!--/span-->
      
		<div class="span3 well sidebar-nav" id="sidebar">
            <ul class="nav nav-list">

<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>

    <li><i class="icon-external-link"></i><a href="http://ron.notbuckman.com/whats-new/">Ron Buchanan</a></li>



<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="../../../../.././feeds/all.atom.xml" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>

<li><a href="../../../../.././feeds/all.rss.xml" rel="alternate"><i class="icon-bookmark icon-large"></i>rss feed</a></li>


    <li><a href="http://twitter.com/zgohr"><i class="icon-twitter-sign icon-large"></i>twitter</a></li>

    <li><a href="http://github.com/zgohr"><i class="icon-github-sign icon-large"></i>github</a></li>

    <li><a href="http://www.facebook.com/zgohr"><i class="icon-facebook-sign icon-large"></i>facebook</a></li>



<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>

<li>
<a href="../../../../.././category/programming.html">
    <i class="icon-folder-open icon-large"></i>programming
</a>
</li>


<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>

<li class="tag-4">
    <a href="../../../../.././tag/blog.html">
        <i class="icon-tag icon-large"></i>blog
    </a>
</li>

<li class="tag-4">
    <a href="../../../../.././tag/github.html">
        <i class="icon-tag icon-large"></i>github
    </a>
</li>

<li class="tag-4">
    <a href="../../../../.././tag/markdown.html">
        <i class="icon-tag icon-large"></i>markdown
    </a>
</li>

<li class="tag-4">
    <a href="../../../../.././tag/git.html">
        <i class="icon-tag icon-large"></i>git
    </a>
</li>

<li class="tag-4">
    <a href="../../../../.././tag/pelican.html">
        <i class="icon-tag icon-large"></i>pelican
    </a>
</li>



<li class="nav-header"><h4><i class="icon-twitter-sign"></i>Twitter</h4></li>
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 30000,
  width: 'auto',
  height: 300,
  theme: {
	shell: {
	  background: '#f5f5f5',
	  color: '#000000'
	},
	tweets: {
	  background: '#ffffff',
	  color: '#000000',
	  links: '#1a50a1'
	}
  },
  features: {
	scrollbar: false,
	loop: false,
	live: false,
	behavior: 'all'
  }
}).render().setUser('zgohr').start();
</script>




</ul>
        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
				which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>, 
		   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->


    
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
	var pageTracker = _gat._getTracker("UA-30789241-1");
pageTracker._trackPageview();
} catch(err) {}</script>

    
    
<script type="text/javascript">
    var disqus_shortname = 'returnthevideotapes';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../../../.././theme/js/jquery.js"></script>
    <script src="../../../../.././theme/js/bootstrap-transition.js"></script>
    <script src="../../../../.././theme/js/bootstrap-alert.js"></script>
    <script src="../../../../.././theme/js/bootstrap-modal.js"></script>
    <script src="../../../../.././theme/js/bootstrap-dropdown.js"></script>
    <script src="../../../../.././theme/js/bootstrap-scrollspy.js"></script>
    <script src="../../../../.././theme/js/bootstrap-tab.js"></script>
    <script src="../../../../.././theme/js/bootstrap-tooltip.js"></script>
    <script src="../../../../.././theme/js/bootstrap-popover.js"></script>
    <script src="../../../../.././theme/js/bootstrap-button.js"></script>
    <script src="../../../../.././theme/js/bootstrap-collapse.js"></script>
    <script src="../../../../.././theme/js/bootstrap-carousel.js"></script>
    <script src="../../../../.././theme/js/bootstrap-typeahead.js"></script>
	
	<!--<script src="../../../../.././theme/js/autosidebar.js"></script>-->
  </body>
</html>
